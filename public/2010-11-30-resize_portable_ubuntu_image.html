<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Resize a Portable Ubuntu Image | 木哈哈</title>
  <meta name="author" content="Chen, Zai-Chun">
  
  <meta name="description" content="天亮了，天黑了，天又亮了，天又黑了...">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Resize a Portable Ubuntu Image"/>
  <meta property="og:site_name" content="木哈哈"/>

  
    <meta property="og:image" content="undefined"/>
  

  
    <link rel="alternative" href="/atom.xml" title="木哈哈" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-31585781-1', 'auto');
  ga('send', 'pageview');
</script>




</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">木哈哈</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		  <li>
			<a href="/atom.xml" title="Atom 1.0 feed">
			  <i class="fa fa-rss"></i>rss
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">		
			<h1> Resize a Portable Ubuntu Image</h1>
		</div>		
	



<div class="row post">
	<!-- cols -->
	
	<div class="col-md-9">
	

			

	<!-- content -->
	<div class="mypage">		
	    <p>&lt;a href=&quot;http://blog.ruski.co.za/page/Resize-a-Portable-Ubuntu-Image.aspx&quot;&gt;http://blog.ruski.co.za/page/Resize-a-Portable-Ubuntu-Image.aspx&lt;/a&gt;
 When you first download and install &lt;a style=&quot;text-decoration: none; color: #336699; border: 0px initial initial;&quot; href=&quot;http://portableubuntu.sourceforge.net/&quot; target=&quot;<em>blank&quot;&gt;Portable Ubuntu&lt;/a&gt;, you're going to be left with only about 500 MB of space on your Linux file system. This isn't enough to do much of anything with, so the first order of business is going to be increasing the size of the image.
There are instructions for doing so at the &lt;a style=&quot;text-decoration: none; color: #336699; border: 0px initial initial;&quot; href=&quot;http://portableubuntu.sourceforge.net/index.php?section=documentation&quot; target=&quot;<em>blank&quot;&gt;Portable Ubuntu website&lt;/a&gt;, but for convenience sake I am repeating them here.
The process is fairly straight forward and basically consists of creating a new larger image file and then copying the existing image over to it. Once that is done we make the new image our primary partition.
To start, make sure that you're not currently running Portable Ubuntu. Exit it if you are.
Open a Windows Command Prompt window by clicking Start -&gt; Run and entering &quot;cmd&quot;.
Change to the directory in which you've installed Portable Ubuntu. For the purposes of this article we'll assume that is C&lt;strong&gt;:Portable_Ubuntu&lt;/strong&gt;.
Change to the images folder:
&lt;div class=&quot;code&quot; style=&quot;font-size: 12px; color: black; font-family: Consolas, 'Courier New', Courier, monospace; background-color: #f1f1f1; line-height: normal; padding: 5px;&quot;&gt;C:Portable_Ubuntu&lt;span class=&quot;kwrd&quot; style=&quot;color: #0000ff;&quot;&gt;&gt;&lt;/span&gt; cd images&lt;/div&gt;
Then we create a new image using the &lt;strong&gt;fsutil&lt;/strong&gt; utility. The number at the end is the size of the new image you want to create in bytes. I've opted to create a 4 GB image in the example below.
&lt;div class=&quot;code&quot; style=&quot;font-size: 12px; color: black; font-family: Consolas, 'Courier New', Courier, monospace; background-color: #f1f1f1; line-height: normal; padding: 5px;&quot;&gt;C:Portable_Ubuntuimages&lt;span class=&quot;kwrd&quot; style=&quot;color: #0000ff;&quot;&gt;&gt;&lt;/span&gt; fsutil file createnew rootfs</em>.img 4294967296&lt;/div&gt;
Next we must mount the new image in our Ubuntu instance. Edit the &lt;strong&gt;portable_ubuntu.conf&lt;/strong&gt;file in the C&lt;strong&gt;:Portable_Ubuntuconfig&lt;/strong&gt; directory using Notepad. You can use explorer for this or the commands below.
&lt;div class=&quot;code&quot; style=&quot;font-size: 12px; color: black; font-family: Consolas, 'Courier New', Courier, monospace; background-color: #f1f1f1; line-height: normal; padding: 5px;&quot;&gt;C:Portable_Ubuntuimages&lt;span class=&quot;kwrd&quot; style=&quot;color: #0000ff;&quot;&gt;&gt;&lt;/span&gt; cd .. C:Portable_Ubuntu&lt;span class=&quot;kwrd&quot; style=&quot;color: #0000ff;&quot;&gt;&gt;&lt;/span&gt; cd config C:Portable_Ubuntuconfig&lt;span class=&quot;kwrd&quot; style=&quot;color: #0000ff;&quot;&gt;&gt;&lt;/span&gt; notepad portable_ubuntu.conf&lt;/div&gt;
Replace the line in the config file that starts with &quot;&lt;strong&gt;cobd3=&lt;/strong&gt;&quot; with the following in notepad:&lt;strong&gt;cobd3=imagesrootfs</em>.img&lt;/strong&gt;
Save the file and close Notepad.
Now we need to run Portable Ubuntu again so that we can copy the contents of the original image over to the new image.
Run Portable Ubuntu and open a Terminal window when it is ready.
Type the following to make sure you have root access:
&lt;div class=&quot;code&quot; style=&quot;font-size: 12px; color: black; font-family: Consolas, 'Courier New', Courier, monospace; background-color: #f1f1f1; line-height: normal; padding: 5px;&quot;&gt;$ sudo su&lt;/div&gt;
You will be asked for a password. The default password for Portable Ubuntu is &lt;strong&gt;123456&lt;/strong&gt;
Next we'll run the Data Definition (&lt;strong&gt;dd&lt;/strong&gt;) tool on linux to create a raw copy of the original image. Don't screw this up as the dd tool has earned the nickname &quot;Data Destroyer&quot; for a good reason.
&lt;div class=&quot;code&quot; style=&quot;font-size: 12px; color: black; font-family: Consolas, 'Courier New', Courier, monospace; background-color: #f1f1f1; line-height: normal; padding: 5px;&quot;&gt;$ dd if=/dev/cobd0 of=/dev/cobd3&lt;/div&gt;
Once that is completed we'll have an exact copy of our data from the original image to the new larger image.
Next we'll do a file system check on the new image to make sure it's good.
&lt;div class=&quot;code&quot; style=&quot;font-size: 12px; color: black; font-family: Consolas, 'Courier New', Courier, monospace; background-color: #f1f1f1; line-height: normal; padding: 5px;&quot;&gt;fsck.ext3 -f /dev/cobd3&lt;/div&gt;
Then we resize the partition on the new image to take up all the space.
&lt;div class=&quot;code&quot; style=&quot;font-size: 12px; color: black; font-family: Consolas, 'Courier New', Courier, monospace; background-color: #f1f1f1; line-height: normal; padding: 5px;&quot;&gt;resize2fs -f /dev/cobd3&lt;/div&gt;
Now that that is done, we can make the new image our main image. To do this, exit the running Portable Ubuntu image.
Go back to the images folder and rename &lt;strong&gt;rootfs.img&lt;/strong&gt; to &lt;strong&gt;rootfs.img.old&lt;/strong&gt; and &lt;strong&gt;rootfs_img&lt;/strong&gt; to&lt;strong&gt;rootfs.img&lt;/strong&gt;.
Remove the line that you had modified in the &lt;strong&gt;portable_ubuntu.conf&lt;/strong&gt; file (&lt;strong&gt;cobd3=imagesrootfs_.img&lt;/strong&gt;) using Notepad.
Now you can run Portable Ubuntu again and you'll have a useful amount of free space left. You can delete the &lt;strong&gt;rootfs.img.old&lt;/strong&gt; file if everything is working properly.</p>
	  
	</div>
	
	<div align="center"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="知识共享授权条款" style="border-width:0" src="/media/cc.png"></a><br><a href="2010-11-30-resize_portable_ubuntu_image.html">本著作</a>由<a xmlns:cc="http://creativecommons.org/ns#" href="/about/" property="cc:attributionName" rel="cc:attributionURL">Chen, Zai-Chun</a>制作，以<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">知识共享 姓名标示-相同方式分享 4.0 国际 授权条款</a>释出</div>
	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/2010-12-01-android_emulator_proxy.html" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>上一页</a></li>
  		

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/2010-11-30-android_invoke_maps_to_direction.html" class="alignright next">下一页<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

    </center>
	</div>
	
	<!-- comment -->
	
<section id="comment">
  <h2 class="title">留言</h2>

  
  	 <div class="ds-thread" data-thread-key="2010-11-30-resize_portable_ubuntu_image.html" data-title="Resize a Portable Ubuntu Image" data-url="http://yesokay.herokuapp.com/2010-11-30-resize_portable_ubuntu_image.html"></div>  
  
</section>

	
	</div> <!-- col-md-9/col-md-12 -->
	
	
		<div class="col-md-3"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	Nov 30 2010 
	</div>
	

	<!-- categories -->
    <!--  -->
    <!-- 	<div class="meta-widget"> -->
    <!-- 	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	 -->
    <!-- <ul id="categorys" class="tag_box list-unstyled collapse in"> -->
    <!--       
  <li>
    <li><a href="/categories/Linux/">Linux<span>52</span></a></li> <li><a href="/categories/tools/">tools<span>31</span></a></li>
  </li>
 -->
    <!-- </ul> -->
    <!-- 	</div> -->
    <!-- 	 -->

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/Linux/">Linux<span>69</span></a></li> <li><a href="/tags/Windows/">Windows<span>18</span></a></li> <li><a href="/tags/ubuntu/">ubuntu<span>9</span></a></li>
    </ul>
	</div>
		

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	

</div><!-- row -->

	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2015 Chen, Zai-Chun
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'yesokay' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
   </html>

